{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/StaffWork.tsx\";\nimport ScrollBoard from '@jiaminghi/data-view-react/es/scrollBoard';\nimport React from 'react';\nimport '../../css/StaffWork.css';\nimport { GetForStaffWork } from '../../utils/RequestService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class StaffWork extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res = await GetForStaffWork();\n      if (res.Table == null) return;\n      var _data = [];\n\n      for (var i = 0; i < res.Table.length; i++) {\n        var _d = res.Table[i];\n        var _item = [];\n        var Employee_Name = _d.Employee_Name;\n        var a = _d.goal_quantity;\n        var d = _d.d;\n        var e = _d.e;\n\n        _item.push(Employee_Name);\n\n        _item.push(a);\n\n        _item.push(d + \"%\");\n\n        _item.push(e + \"%\");\n\n        _data.push(_item);\n      }\n\n      var t = (res.Table.length + 1) / 5;\n      var k = (res.Table.length + 1) % 5;\n\n      var _refreshTime = (parseInt(t.toString()) + k) * this.state.scrollTime;\n\n      this.setState({\n        data: _data,\n        refreshTime: _refreshTime\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        console.log(\"ahh\", this.state._height);\n        await this.getAPIData();\n      }, 6000);\n    };\n\n    this.componentWillMount = async () => {\n      var _full = this.props.full == null ? true : this.props.full;\n\n      if (_full) {\n        this.setState({\n          _height: document.body.scrollHeight - 120,\n          _fontSize: 24\n        });\n      } else {\n        this.setState({\n          _fontSize: 16,\n          _height: this.props.hh\n        });\n      }\n    };\n\n    this.state = {\n      data: [],\n      scrollTime: 3000,\n      refreshTime: 3000,\n      _height: 0,\n      _fontSize: 16\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.hh == null && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u5458\\u5DE5\\u6548\\u7387\\u4E0E\\u8FD4\\u5DE5\\u7387\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 74\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 27\n      }, this), this.state._height > 0 && /*#__PURE__*/_jsxDEV(ScrollBoard, {\n        config: {\n          header: ['姓名', '件数', '效率', '返工率'],\n          //headerHeight:100,\n          data: this.state.data,\n          headerBGC: '#fafafa',\n          oddRowBGC: '#fafafa',\n          evenRowBGC: '#fff',\n          waitTime: this.state.scrollTime,\n          index: false,\n          hoverPause: false,\n          //columnWidth: [50],\n          align: ['center'],\n          carousel: 'page'\n        },\n        style: {\n          'height': 289,\n          color: 'rgba(0, 0, 0, 0.85)',\n          'font-size': '100px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/StaffWork.tsx"],"names":["ScrollBoard","React","GetForStaffWork","StaffWork","Component","constructor","props","getAPIData","res","Table","_data","i","length","_d","_item","Employee_Name","a","goal_quantity","d","e","push","t","k","_refreshTime","parseInt","toString","state","scrollTime","setState","data","refreshTime","componentDidMount","setInterval","console","log","_height","componentWillMount","_full","full","document","body","scrollHeight","_fontSize","hh","render","that","onkeydown","ev","all","window","event","keyCode","history","width","textAlign","header","headerBGC","oddRowBGC","evenRowBGC","waitTime","index","hoverPause","align","carousel","color"],"mappings":"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","sourcesContent":["import ScrollBoard from '@jiaminghi/data-view-react/es/scrollBoard'\r\nimport React, { useState, useEffect } from 'react';\r\nimport '../../css/StaffWork.css'\r\nimport {GetForStaffWork} from '../../utils/RequestService'\r\n\r\nexport default class StaffWork extends React.Component<any,any>{\r\n\r\n  constructor(props) {\r\n    super(props);\r\n   \r\n    this.state = { data:[],scrollTime:3000, refreshTime:3000, _height:0,\r\n      _fontSize:16};\r\n    }\r\n\r\n  getAPIData=async()=>{\r\n\r\n    const res=await GetForStaffWork()\r\n    if(res.Table==null)return;\r\n    var _data=[];\r\n    for(var i=0;i<res.Table.length;i++)\r\n    {\r\n      var _d:any=res.Table[i];\r\n      var _item:any=[];\r\n      \r\n      var Employee_Name=_d.Employee_Name;\r\n      var a=_d.goal_quantity;\r\n      var d=_d.d;\r\n      var e=_d.e;\r\n      _item.push(Employee_Name);\r\n      _item.push(a);\r\n      _item.push(d+\"%\");\r\n      _item.push(e+\"%\");\r\n\r\n      _data.push(_item)\r\n    } \r\n    var t=(res.Table.length+1)/5;\r\n    var k=(res.Table.length+1)%5;\r\n   \r\n    var _refreshTime= (parseInt(t.toString())+k)*this.state.scrollTime\r\n   \r\n    this.setState({data:_data,refreshTime:_refreshTime})\r\n  }\r\n\r\ncomponentDidMount=async()=> {\r\n  await this.getAPIData()\r\n  \r\n   setInterval(\r\n    async() => {\r\n      console.log(\"ahh\",this.state._height)\r\n      await this.getAPIData()\r\n    },\r\n    6000);\r\n}\r\n\r\ncomponentWillMount=async()=>{\r\n  var _full=this.props.full==null?true:this.props.full;\r\n  if(_full)\r\n  {\r\n     this.setState({_height:document.body.scrollHeight-120,_fontSize:24})\r\n      \r\n  }\r\n  else\r\n  {\r\n   this.setState({_fontSize:16,_height:this.props.hh})\r\n  }\r\n}\r\n\r\n\r\n  render(){\r\n    const that = this;\r\n    document.onkeydown = function (e: any) {\r\n      var ev = document.all ? window.event : e;\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n\r\n\r\n    return <>\r\n    {this.props.hh==null&&<div style={{width:'100%',textAlign:'center'}}><h1>员工效率与返工率</h1></div>}\r\n\r\n    {this.state._height>0&&\r\n    <ScrollBoard config={{\r\n  header: ['姓名', '件数', '效率','返工率'],\r\n  //headerHeight:100,\r\n  \r\n  data: this.state.data,\r\n  headerBGC:'#fafafa',\r\n  oddRowBGC:'#fafafa',\r\n  evenRowBGC:'#fff',\r\n  \r\n  waitTime:this.state.scrollTime,\r\n  index: false,\r\n  hoverPause:false,\r\n  //columnWidth: [50],\r\n  align: ['center'],\r\n  carousel: 'page'\r\n}} style={{'height': 289,color:'rgba(0, 0, 0, 0.85)','font-size':'100px'}} />\r\n  }\r\n\r\n    </>\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}