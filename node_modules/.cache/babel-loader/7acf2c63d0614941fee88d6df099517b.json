{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/hcharts/H_BalanceSheet.tsx\";\nimport React from 'react';\n// import {SmileTwoTone} from  '@ant-design/icons';\nimport { GetBalanceSheet, GetDayTarget } from '../../../utils/RequestService';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport highcharts3d from 'highcharts/highcharts-3d';\nimport cylinder from \"highcharts/modules/cylinder\";\nimport '../../../css/font-awesome-4.7.0/css/font-awesome.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nhighcharts3d(Highcharts);\ncylinder(Highcharts);\nexport default class H_BalanceSheet extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res0 = await GetDayTarget();\n      if (res0.Table == null) return;\n\n      if (res0.Table.length > 0) {\n        console.log('res0res0', res0);\n        var _goaltotal = res0.Table[0].goaltotal; //目标\n\n        this.setState({\n          goaltotal: _goaltotal\n        }); //this.setState({goaltotal:20})\n      }\n\n      const res = await GetBalanceSheet();\n      if (res.Table == null) return;\n      if (res.Table.length == 0) return;\n      var _data_Description = [];\n      var _data_Quantity = [];\n      var _data_goal_quantity = [];\n      console.log('res.Table', res.Table); // for(var k=0;k<4;k++){\n\n      for (var i = 0; i < res.Table.length; i++) {\n        var item = res.Table[i];\n        var Quantity = item.Quantity == null ? 0 : item.Quantity;\n        var goal_quantity = item.goal_quantity == null ? 0 : item.goal_quantity;\n        var Description = item.Description == null ? 0 : item.Description;\n\n        _data_Description.push(Description);\n\n        _data_Quantity.push(Quantity);\n\n        _data_goal_quantity.push(goal_quantity);\n      } // }\n      //     for(var i=0;i<10;i++)\n      //     {\n      //  _data_Description.push('的说法描述'+i)\n      //         _data_Quantity.push(i+1)\n      //         _data_goal_quantity.push(i+1)\n      //     }\n\n\n      this.setState({\n        data_Description: _data_Description,\n        data_Quantity: _data_Quantity,\n        data_goal_quantity: _data_goal_quantity\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        await this.getAPIData();\n      }, 6000);\n    };\n\n    this.componentWillMount = async () => {\n      var _full = this.props.full == null ? true : this.props.full;\n\n      if (_full) {\n        this.setState({\n          _height: document.body.scrollHeight * 0.7,\n          _fontSize: 30\n        });\n      } else {\n        this.setState({\n          _fontSize: 16,\n          _height: this.props.hh\n        });\n      }\n    };\n\n    this.state = {\n      data_Description: [],\n      data_Quantity: [],\n      data_goal_quantity: [],\n      goaltotal: 99999,\n      _height: 0,\n      _fontSize: 16\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    const options = {\n      credits: {\n        enabled: false\n      },\n      chart: {\n        //animation: false,\n        height: this.state._height,\n        type: 'cylinder',\n        options3d: {\n          enabled: false,\n          alpha: 20,\n          beta: 0,\n          depth: 0,\n          viewDistance: 25\n        }\n      },\n      tooltip: {\n        shared: false // style: {\n        //   //fontWeight:600,\n        //   fontSize:40,\n        //   color: \"#000\",\n        // },\n\n      },\n      title: {\n        text: null\n      },\n      plotOptions: {\n        series: {\n          animation: false\n        },\n        cylinder: {\n          colorByPoint: true,\n          depth: 40,\n          //pointWidth: 40,\n          // labels:{\n          //   useHTML:true,\n          //   formatter:function(){\n          //     return \"<i className='fa fa-camera-retro fa-5x'></i>\"\n          //   }\n          // },\n          dataLabels: {\n            enabled: true,\n            useHTML: true,\n            y: -20,\n            formatter: function () {\n              var index = that.state.data_Description.indexOf(this.x);\n              var _reLable = that.state.data_goal_quantity[index];\n\n              if (_reLable >= that.state.goaltotal) {\n                return `<i class=\"fa fa-smile-o fa-3x\" style=\"color:rgb(4, 172, 247)\"></i><br/><span style='padding-left:3px;text-align:\"center\";font-size:${that.state._fontSize}px'>${_reLable}</span>`;\n              } else {\n                return `<i class=\"fa fa-meh-o fa-3x\" style=\"color:red\"></i><br/><span style='padding-left:3px;text-align:\"center\";font-size:${that.state._fontSize}px'>${_reLable}</span>`; //return `<span style='font-size:${that.state._fontSize}px'>${_reLable}</span>`\n              }\n            } //useHtml:true,\n            //format:'<svg><i class=\"fa fa-camera-retro fa-5x\"></i></svg> 7 %'\n            // enabled: true,\n            //y: -10,\n            // formatter: function() {\n            //   var k=this;\n            //   var index=that.state.data_Description.indexOf(this.x);\n            //   var _reLable=that.state.data_goal_quantity[index];\n            //   if(_reLable>=that.state.goaltotal)\n            //   {\n            //     _reLable=9999;\n            //   }\n            //   var pp=\"<i className='fa fa-camera-retro fa-5x'></i>\"\n            //   return pp;\n            // }\n\n          }\n        } // line: {\n        //   dataLabels: {\n        //     enabled: true,\n        //     y: -5,\n        //     formatter: function() {\n        //       return this.y.toFixed(2) + \"%\";\n        //     }\n        //   }\n        // }\n\n      },\n      xAxis: {\n        categories: this.state.data_Description,\n        //type: 'category',\n        labels: {\n          //autoRotationLimit: 40,\n          //autoRotation: true,\n          // rotation: true,  // 设置轴标签旋转角度\n          // style: {\n          //   //fontWeight:600,\n          //   fontSize: 16,\n          //   color: \"#000\"\n          // }\n          rotation: this.state.data_Description.length > 10 ? -35 : 0,\n          style: {\n            //fontWeight:600,\n            //fontSize: 12,\n            fontSize: this.state._fontSize,\n            color: \"#000\",\n            autoRotation: true,\n            autoRotationLimit: 10 //autoRotationLimit:10,\n            //step:100\n            //,textOverflow: 'none',\n            // whiteSpace: 'auto'\n\n          }\n        }\n      },\n      yAxis: {\n        min: 0,\n        title: {\n          text: ''\n        },\n        gridLineColor: \"#999\",\n        //横向网格线颜色,\n        labels: {\n          rotation: 0,\n          style: {\n            //fontWeight:600,\n            fontSize: this.state._fontSize,\n            color: \"#000\"\n          }\n        }\n      },\n      series: [{\n        name: \"生产数量\",\n        data: this.state.data_goal_quantity,\n        color: \"#000\",\n        index: '',\n        // y:'y',\n        dataLabels: {\n          enabled: true,\n          //fontSize:30,\n          color: '#000',\n          // format:'{index}',\n          // formatter: (e)=>{\n          //   console.log('-------------',options.chart.options3d)\n          //   return '12'\n          // },\n          style: {\n            fontSize: this.state._fontSize\n          } // y: 10\n\n        }\n      }],\n      legend: false\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.props.hh == null && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center',\n          paddingTop: 60,\n          paddingBottom: 20,\n          fontSize: '30px',\n          fontWeight: 600\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u751F\\u4EA7\\u5E73\\u8861\\u72B6\\u51B5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 137\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 28\n      }, this), this.state._height > 0 && /*#__PURE__*/_jsxDEV(HighchartsReact, {\n        highcharts: Highcharts,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 10\n    }, this);\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/hcharts/H_BalanceSheet.tsx"],"names":["React","GetBalanceSheet","GetDayTarget","Highcharts","HighchartsReact","highcharts3d","cylinder","H_BalanceSheet","Component","constructor","props","getAPIData","res0","Table","length","console","log","_goaltotal","goaltotal","setState","res","_data_Description","_data_Quantity","_data_goal_quantity","i","item","Quantity","goal_quantity","Description","push","data_Description","data_Quantity","data_goal_quantity","componentDidMount","setInterval","componentWillMount","_full","full","_height","document","body","scrollHeight","_fontSize","hh","state","render","that","onkeydown","e","ev","all","window","event","keyCode","history","options","credits","enabled","chart","height","type","options3d","alpha","beta","depth","viewDistance","tooltip","shared","title","text","plotOptions","series","animation","colorByPoint","dataLabels","useHTML","y","formatter","index","indexOf","x","_reLable","xAxis","categories","labels","rotation","style","fontSize","color","autoRotation","autoRotationLimit","yAxis","min","gridLineColor","name","data","legend","width","textAlign","paddingTop","paddingBottom","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { render } from 'react-dom'\r\n// import {SmileTwoTone} from  '@ant-design/icons';\r\nimport {GetBalanceSheet,GetDayTarget} from '../../../utils/RequestService'\r\nimport Highcharts from 'highcharts'\r\nimport HighchartsReact from 'highcharts-react-official'\r\nimport highcharts3d from 'highcharts/highcharts-3d';\r\nimport cylinder from \"highcharts/modules/cylinder\";\r\nimport '../../../css/font-awesome-4.7.0/css/font-awesome.min.css'\r\nhighcharts3d(Highcharts);\r\ncylinder(Highcharts);\r\nexport default class H_BalanceSheet extends React.Component<any,any>{\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n   \r\n    this.state = { data_Description:[],data_Quantity:[],data_goal_quantity:[], goaltotal:99999, _height:0,\r\n    _fontSize:16};\r\n    }\r\n\r\n\r\n    \r\n    getAPIData=async()=>{\r\n      const res0=await GetDayTarget()\r\n      if(res0.Table==null)return;\r\n      if(res0.Table.length>0)\r\n      {\r\n      console.log('res0res0',res0)\r\n      var _goaltotal=res0.Table[0].goaltotal;//目标\r\n      this.setState({goaltotal:_goaltotal})\r\n      //this.setState({goaltotal:20})\r\n      }\r\n     \r\n\r\n      const res=await GetBalanceSheet()\r\n      if(res.Table==null)return;\r\n      if(res.Table.length==0)return;\r\n      var _data_Description=[];\r\n      var _data_Quantity=[];\r\n      var _data_goal_quantity=[];\r\n      \r\n      console.log('res.Table',res.Table)\r\n      // for(var k=0;k<4;k++){\r\n      \r\n      for(var i=0;i<res.Table.length;i++)\r\n      {\r\n        var item=res.Table[i];\r\n        var Quantity=item.Quantity==null?0:item.Quantity;\r\n        var goal_quantity=item.goal_quantity==null?0:item.goal_quantity;\r\n        var Description=item.Description==null?0:item.Description;\r\n        _data_Description.push(Description)\r\n        _data_Quantity.push(Quantity)\r\n        _data_goal_quantity.push(goal_quantity)       \r\n      }  \r\n    // }\r\n\r\n//     for(var i=0;i<10;i++)\r\n//     {\r\n//  _data_Description.push('的说法描述'+i)\r\n//         _data_Quantity.push(i+1)\r\n//         _data_goal_quantity.push(i+1)\r\n//     }\r\n\r\n\r\n      this.setState(\r\n        {\r\n          data_Description:_data_Description,\r\n          data_Quantity:_data_Quantity,\r\n          data_goal_quantity:_data_goal_quantity\r\n        }\r\n        )\r\n    }\r\n  \r\n  componentDidMount=async()=> {\r\n    await this.getAPIData()\r\n  \r\n     setInterval(\r\n      async() => {\r\n        await this.getAPIData()\r\n      },\r\n      6000);\r\n  }\r\n\r\n  componentWillMount=async()=>{\r\n    var _full=this.props.full==null?true:this.props.full;\r\n    if(_full)\r\n    {\r\n       this.setState({_height:document.body.scrollHeight*0.7,_fontSize:30})\r\n    }\r\n    else\r\n    {\r\n     \r\n     this.setState({_fontSize:16,_height:this.props.hh})\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  \r\n\r\n  render(){\r\n    const that = this;\r\n    document.onkeydown = function (e: any) {\r\n      var ev = document.all ? window.event : e;\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n\r\n    const options:any = {\r\n      credits: {\r\n        enabled: false\r\n      },\r\n      chart: {\r\n        //animation: false,\r\n        height:this.state._height,\r\n        type: 'cylinder',\r\n        options3d: {\r\n          enabled: false,\r\n          alpha: 20,\r\n          beta: 0,\r\n          depth: 0,\r\n          viewDistance: 25\r\n        }\r\n      },\r\n      tooltip: {\r\n        shared: false,\r\n        // style: {\r\n        //   //fontWeight:600,\r\n        //   fontSize:40,\r\n        //   color: \"#000\",\r\n        // },\r\n      },\r\n       title: {\r\n         \r\n         text: null\r\n       },\r\n      plotOptions: {\r\n        series:{\r\n          animation: false,\r\n        },\r\n        cylinder: {\r\n          colorByPoint: true,\r\n          depth: 40,\r\n          //pointWidth: 40,\r\n          // labels:{\r\n          //   useHTML:true,\r\n          //   formatter:function(){\r\n          //     return \"<i className='fa fa-camera-retro fa-5x'></i>\"\r\n          //   }\r\n          // },\r\n          dataLabels: {\r\n            enabled: true,\r\n            useHTML: true, \r\n            y: -20,\r\n            formatter : function(){ \r\n              var index=that.state.data_Description.indexOf(this.x);\r\n              var _reLable=that.state.data_goal_quantity[index];\r\n              if(_reLable>=that.state.goaltotal)\r\n              {\r\n                return `<i class=\"fa fa-smile-o fa-3x\" style=\"color:rgb(4, 172, 247)\"></i><br/><span style='padding-left:3px;text-align:\"center\";font-size:${that.state._fontSize}px'>${_reLable}</span>`\r\n              }\r\n              else\r\n              {\r\n                return `<i class=\"fa fa-meh-o fa-3x\" style=\"color:red\"></i><br/><span style='padding-left:3px;text-align:\"center\";font-size:${that.state._fontSize}px'>${_reLable}</span>`\r\n             //return `<span style='font-size:${that.state._fontSize}px'>${_reLable}</span>`\r\n              }\r\n            }, \r\n            //useHtml:true,\r\n            //format:'<svg><i class=\"fa fa-camera-retro fa-5x\"></i></svg> 7 %'\r\n           // enabled: true,\r\n            //y: -10,\r\n            \r\n            // formatter: function() {\r\n            //   var k=this;\r\n              \r\n            //   var index=that.state.data_Description.indexOf(this.x);\r\n            //   var _reLable=that.state.data_goal_quantity[index];\r\n            //   if(_reLable>=that.state.goaltotal)\r\n            //   {\r\n            //     _reLable=9999;\r\n            //   }\r\n            //   var pp=\"<i className='fa fa-camera-retro fa-5x'></i>\"\r\n            //   return pp;\r\n            // }\r\n          },\r\n          \r\n        },\r\n        \r\n        // line: {\r\n        //   dataLabels: {\r\n        //     enabled: true,\r\n        //     y: -5,\r\n        //     formatter: function() {\r\n        //       return this.y.toFixed(2) + \"%\";\r\n        //     }\r\n        //   }\r\n        // }\r\n      },\r\n      xAxis: {\r\n        categories: this.state.data_Description,\r\n        //type: 'category',\r\n        labels: {\r\n          //autoRotationLimit: 40,\r\n          //autoRotation: true,\r\n          // rotation: true,  // 设置轴标签旋转角度\r\n          // style: {\r\n          //   //fontWeight:600,\r\n          //   fontSize: 16,\r\n          //   color: \"#000\"\r\n          // }\r\n         \r\n          rotation:this.state.data_Description.length>10? -35:0, \r\n          style: {\r\n            //fontWeight:600,\r\n            //fontSize: 12,\r\n            fontSize: this.state._fontSize,\r\n            color: \"#000\",\r\n            autoRotation:true,\r\n            autoRotationLimit:10\r\n            //autoRotationLimit:10,\r\n            //step:100\r\n            //,textOverflow: 'none',\r\n           // whiteSpace: 'auto'\r\n          },\r\n          \r\n        },\r\n       \r\n      },\r\n      \r\n      yAxis: {\r\n        min: 0,\r\n        title: {\r\n          text: ''\r\n        },\r\n        gridLineColor: \"#999\", //横向网格线颜色,\r\n          labels: {\r\n            rotation: 0,\r\n            style: {\r\n              //fontWeight:600,\r\n              fontSize: this.state._fontSize,\r\n              color: \"#000\"\r\n            }\r\n          }\r\n      },\r\n      series: [\r\n        {\r\n          name: \"生产数量\",\r\n          data: this.state.data_goal_quantity,\r\n          color: \"#000\",\r\n          index:'',\r\n         // y:'y',\r\n          dataLabels: {\r\n            enabled: true,\r\n            //fontSize:30,\r\n            color: '#000',\r\n           // format:'{index}',\r\n            // formatter: (e)=>{\r\n            //   console.log('-------------',options.chart.options3d)\r\n            //   return '12'\r\n            // },\r\n            style:{ fontSize:this.state._fontSize}\r\n          \r\n           // y: 10\r\n          }\r\n        }\r\n        ,\r\n        \r\n      ],\r\n      legend: false,\r\n  \r\n    }\r\n\r\n    \r\n  \r\n  return <div >\r\n     {this.props.hh==null&&<div style={{width:'100%',textAlign:'center',paddingTop:60,paddingBottom:20,fontSize:'30px',fontWeight:600}}><h1>生产平衡状况</h1></div>}\r\n     {this.state._height>0&&<HighchartsReact \r\n      \r\n      highcharts={Highcharts}\r\n      options={options}\r\n  />}\r\n</div>;\r\n  }\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}