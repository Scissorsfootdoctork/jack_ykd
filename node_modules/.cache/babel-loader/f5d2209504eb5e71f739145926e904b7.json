{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/StaffWork.tsx\";\nimport ScrollBoard from '@jiaminghi/data-view-react/es/scrollBoard';\nimport React from 'react';\nimport '../../css/StaffWork.css';\nimport { GetForStaffWork } from '../../utils/RequestService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class StaffWork extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res = await GetForStaffWork();\n      if (res.Table == null) return;\n      var _data = [];\n\n      for (var i = 0; i < res.Table.length; i++) {\n        var _d = res.Table[i];\n        var _item = [];\n        var Employee_Name = _d.Employee_Name;\n        var a = _d.goal_quantity;\n        var d = _d.d;\n        var e = _d.e;\n\n        _item.push(Employee_Name);\n\n        _item.push(a);\n\n        _item.push(d + '%');\n\n        _item.push(e + '%');\n\n        _data.push(_item);\n      }\n\n      var t = (res.Table.length + 1) / 5;\n      var k = (res.Table.length + 1) % 5;\n\n      var _refreshTime = (parseInt(t.toString()) + k) * this.state.scrollTime;\n\n      this.setState({\n        data: _data,\n        refreshTime: _refreshTime\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        console.log('ahh', this.state._height);\n        await this.getAPIData();\n      }, 6000);\n    };\n\n    this.componentWillMount = async () => {\n      var _full = this.props.full == null ? true : this.props.full;\n\n      if (_full) {\n        this.setState({\n          _height: document.body.scrollHeight - 120,\n          _fontSize: 24\n        });\n      } else {\n        this.setState({\n          _fontSize: 16,\n          _height: this.props.hh\n        });\n      }\n    };\n\n    this.state = {\n      data: [],\n      scrollTime: 3000,\n      refreshTime: 3000,\n      _height: 0,\n      _fontSize: 16\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.hh == null && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u5458\\u5DE5\\u6548\\u7387\\u4E0E\\u8FD4\\u5DE5\\u7387\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), this.state._height > 0 && /*#__PURE__*/_jsxDEV(ScrollBoard, {\n        config: {\n          header: ['姓名', '件数', '效率', '返工率'],\n          //headerHeight:100,\n          data: this.state.data,\n          headerBGC: '#fafafa',\n          oddRowBGC: '#fafafa',\n          evenRowBGC: '#fff',\n          waitTime: this.state.scrollTime,\n          index: false,\n          hoverPause: false,\n          //columnWidth: [50],\n          align: ['center'],\n          carousel: 'page'\n        },\n        style: {\n          'height': 289,\n          color: 'rgba(0, 0, 0, 0.85)',\n          'font-size': '100px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/StaffWork.tsx"],"names":["ScrollBoard","React","GetForStaffWork","StaffWork","Component","constructor","props","getAPIData","res","Table","_data","i","length","_d","_item","Employee_Name","a","goal_quantity","d","e","push","t","k","_refreshTime","parseInt","toString","state","scrollTime","setState","data","refreshTime","componentDidMount","setInterval","console","log","_height","componentWillMount","_full","full","document","body","scrollHeight","_fontSize","hh","render","that","onkeydown","ev","all","window","event","keyCode","history","width","textAlign","header","headerBGC","oddRowBGC","evenRowBGC","waitTime","index","hoverPause","align","carousel","color"],"mappings":"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","sourcesContent":["import ScrollBoard from '@jiaminghi/data-view-react/es/scrollBoard'\r\nimport React, { useState, useEffect } from 'react'\r\nimport '../../css/StaffWork.css'\r\nimport { GetForStaffWork } from '../../utils/RequestService'\r\n\r\nexport default class StaffWork extends React.Component<any, any> {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      data: [], scrollTime: 3000, refreshTime: 3000, _height: 0,\r\n      _fontSize: 16\r\n    }\r\n  }\r\n\r\n  getAPIData = async () => {\r\n\r\n    const res = await GetForStaffWork()\r\n    if (res.Table == null) return\r\n    var _data = []\r\n    for (var i = 0; i < res.Table.length; i++) {\r\n      var _d: any = res.Table[i]\r\n      var _item: any = []\r\n\r\n      var Employee_Name = _d.Employee_Name\r\n      var a = _d.goal_quantity\r\n      var d = _d.d\r\n      var e = _d.e\r\n      _item.push(Employee_Name)\r\n      _item.push(a)\r\n      _item.push(d + '%')\r\n      _item.push(e + '%')\r\n\r\n      _data.push(_item)\r\n    }\r\n    var t = (res.Table.length + 1) / 5\r\n    var k = (res.Table.length + 1) % 5\r\n\r\n    var _refreshTime = (parseInt(t.toString()) + k) * this.state.scrollTime\r\n\r\n    this.setState({ data: _data, refreshTime: _refreshTime })\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    await this.getAPIData()\r\n\r\n    setInterval(\r\n        async () => {\r\n          console.log('ahh', this.state._height)\r\n          await this.getAPIData()\r\n        },\r\n        6000)\r\n  }\r\n\r\n  componentWillMount = async () => {\r\n    var _full = this.props.full == null ? true : this.props.full\r\n    if (_full) {\r\n      this.setState(\r\n          { _height: document.body.scrollHeight - 120, _fontSize: 24 })\r\n\r\n    } else {\r\n      this.setState({ _fontSize: 16, _height: this.props.hh })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const that = this\r\n    document.onkeydown = function(e: any) {\r\n      var ev = document.all ? window.event : e\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n\r\n    return <>\r\n      { this.props.hh == null &&\r\n\t\t\t\t<div style={ { width: '100%', textAlign: 'center' } }>\r\n\t\t\t\t\t<h1>员工效率与返工率</h1></div> }\r\n\r\n      { this.state._height > 0 &&\r\n\t\t\t\t<ScrollBoard config={ {\r\n          header: ['姓名', '件数', '效率', '返工率'],\r\n          //headerHeight:100,\r\n\r\n          data: this.state.data,\r\n          headerBGC: '#fafafa',\r\n          oddRowBGC: '#fafafa',\r\n          evenRowBGC: '#fff',\r\n\r\n          waitTime: this.state.scrollTime,\r\n          index: false,\r\n          hoverPause: false,\r\n          //columnWidth: [50],\r\n          align: ['center'],\r\n          carousel: 'page'\r\n        } } style={ {\r\n          'height': 289,\r\n          color: 'rgba(0, 0, 0, 0.85)',\r\n          'font-size': '100px'\r\n        } }/>\r\n      }\r\n\r\n    </>\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}