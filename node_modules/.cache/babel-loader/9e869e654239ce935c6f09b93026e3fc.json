{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/ReworkTarget.tsx\";\nimport React from 'react';\nimport { Bar } from '@ant-design/charts';\nimport { GetReworkTarget } from '../../utils/RequestService'; // const _data =  [\n//     {\n//         name: '最高返工【100】',\n//         value: 100,\n//         type: '最高返工',\n//      },\n//     {\n//       name: '最高返工【100】',\n//       value: 0,\n//       type: '上午',\n//     },\n//     {\n//         name: '最高返工【100】',\n//       value: 0,\n//       type: '下午',\n//     },\n//     {\n//         name: '最高返工【100】',\n//       value: 0,\n//       type: '夜晚',\n//     },\n//     {\n//         name: '实际返工【80】',\n//       value: 40,\n//       type: '上午',\n//     },\n//     {\n//         name: '实际返工【80】',\n//       value: 30,\n//       type: '下午',\n//     },\n//     {\n//         name: '实际返工【80】',\n//       value: 10,\n//       type: '夜晚',\n//     },\n//     {\n//         name: '实际返工【80】',\n//         value: 0,\n//         type: '最高返工',\n//      },\n//   ];\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ReworkTarget extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res = await GetReworkTarget();\n      if (res.Table == null) return;\n      if (res.Table.length == 0) return;\n      var a_m_redo = res.Table[0].a_m_redo.substring(0, res.Table[0].a_m_redo.lastIndexOf('%'));\n      var p_m_redo = res.Table[0].p_m_redo.substring(0, res.Table[0].p_m_redo.lastIndexOf('%'));\n      var n_m_redo = res.Table[0].n_m_redo.substring(0, res.Table[0].n_m_redo.lastIndexOf('%'));\n      var high_redo = res.Table[0].high_redo.substring(0, res.Table[0].high_redo.lastIndexOf('%'));\n      var real_redo = res.Table[0].real_redo.substring(0, res.Table[0].real_redo.lastIndexOf('%'));\n      if (a_m_redo == 0) a_m_redo = parseInt(a_m_redo).toFixed(2);\n      if (p_m_redo == 0) p_m_redo = parseInt(p_m_redo).toFixed(2);\n      if (n_m_redo == 0) n_m_redo = parseInt(n_m_redo).toFixed(2);\n      if (high_redo == 0) high_redo = parseInt(high_redo).toFixed(2);\n      if (real_redo == 0) real_redo = parseInt(real_redo).toFixed(2);\n      const _data = [{\n        name: `最高返工【${high_redo}】`,\n        value: high_redo,\n        type: `最高返工-${high_redo}%`\n      }, {\n        name: `最高返工【${high_redo}】`,\n        value: 0,\n        type: `上午-${a_m_redo}%`\n      }, {\n        name: `最高返工【${high_redo}】`,\n        value: 0,\n        type: `下午-${p_m_redo}%`\n      }, {\n        name: `最高返工【${high_redo}】`,\n        value: 0,\n        type: `夜晚-${n_m_redo}%`\n      }, {\n        name: `实际返工【${real_redo}】`,\n        value: a_m_redo,\n        type: `上午-${a_m_redo}%`\n      }, {\n        name: `实际返工【${real_redo}】`,\n        value: p_m_redo,\n        type: `下午-${p_m_redo}%`\n      }, {\n        name: `实际返工【${real_redo}】`,\n        value: n_m_redo,\n        type: `夜晚-${n_m_redo}%`\n      }, {\n        name: `实际返工【${real_redo}】`,\n        value: 0,\n        type: `最高返工-${high_redo}%`\n      }, {\n        name: `上午返工【${a_m_redo}】`,\n        value: a_m_redo,\n        type: `上午-${a_m_redo}%`\n      }, {\n        name: `上午返工【${a_m_redo}】`,\n        value: 0,\n        type: `下午-${a_m_redo}%`\n      }, {\n        name: `上午返工【${a_m_redo}】`,\n        value: 0,\n        type: `夜晚-${a_m_redo}%`\n      }, {\n        name: `上午返工【${a_m_redo}】`,\n        value: 0,\n        type: `最高返工-${a_m_redo}%`\n      }, {\n        name: `下午返工【${p_m_redo}】`,\n        value: p_m_redo,\n        type: `上午-${p_m_redo}%`\n      }, {\n        name: `下午返工【${p_m_redo}】`,\n        value: 0,\n        type: `下午-${p_m_redo}%`\n      }, {\n        name: `下午返工【${p_m_redo}】`,\n        value: 0,\n        type: `夜晚-${p_m_redo}%`\n      }, {\n        name: `下午返工【${p_m_redo}】`,\n        value: 0,\n        type: `最高返工-${p_m_redo}%`\n      }, {\n        name: `夜晚返工【${n_m_redo}】`,\n        value: n_m_redo,\n        type: `上午-${n_m_redo}%`\n      }, {\n        name: `夜晚返工【${n_m_redo}】`,\n        value: 0,\n        type: `下午-${n_m_redo}%`\n      }, {\n        name: `夜晚返工【${n_m_redo}】`,\n        value: 0,\n        type: `夜晚-${n_m_redo}%`\n      }, {\n        name: `夜晚返工【${n_m_redo}】`,\n        value: 0,\n        type: `最高返工-${n_m_redo}%`\n      }]; // var aa=0.0899.toFixed(2)\n      // console.log('high_redo',high_redo)\n      // console.log('a_m_redo',a_m_redo)\n      // console.log('p_m_redo',p_m_redo)\n      // console.log('n_m_redo',aa)\n      // console.log('real_redo',real_redo)\n\n      this.setState({\n        data: _data\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        await this.getAPIData();\n      }, 5000);\n    };\n\n    this.componentWillMount = async () => {\n      var _full = this.props.full == null ? true : this.props.full;\n\n      if (_full) {\n        this.setState({\n          _height: document.body.scrollHeight - 120,\n          _fontSize: 24\n        });\n      } else {\n        this.setState({\n          _fontSize: 24,\n          _height: this.props.hh\n        });\n      }\n    };\n\n    this.getAITraining = () => {// const  ss=this.state.data;\n      // const aaa=ss.filter(p=>p.name=='实际返工【80】'&&p.type=='夜晚')\n      // const kkk=aaa[0].value;\n      // aaa[0].value=kkk+1;\n      // console.log(aaa[0])\n      // this.setState({data:ss})\n    };\n\n    this.state = {\n      data: [],\n      _height: 0,\n      _fontSize: 16\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    const config = {\n      data: this.state.data,\n      //appendPadding: 20,\n      isStack: true,\n      xField: 'value',\n      yField: 'name',\n      seriesField: 'type',\n      //isPercent: true,\n      height: that.props.hh,\n      //colorField: 'year', // 部分图表使用 seriesField\n      //colorField: 'type', // 部分图表使用 seriesField\n      color: ['#0066cc', '#b3d9ff', '#66b3ff', '#1a8cff'],\n      label: {\n        // position: 'middle',\n        style: {\n          fontSize: this.state._fontSize\n        }\n      },\n      legend: false,\n      xAxis: {\n        label: {\n          autoHide: false,\n          autoRotate: true,\n          style: {\n            fill: 'black',\n            // opacity: 0.6,\n            fontSize: this.state._fontSize\n          } // rotate: true\n\n        }\n      },\n      yAxis: {\n        label: {\n          autoHide: false,\n          autoRotate: true,\n          style: {\n            fill: 'black',\n            // opacity: 0.6,\n            fontSize: this.state._fontSize\n          } // rotate: true\n\n        }\n      } // label: {\n      //   position: 'middle',\n      //   layout: [\n      //     { type: 'interval-adjust-position' },\n      //     { type: 'interval-hide-overlap' },\n      //     { type: 'adjust-color' },\n      //   ],\n      // },\n\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '0px 20px'\n      },\n      children: [this.props.hh == null && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center',\n          fontSize: '30px',\n          fontWeight: 600\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u5F53\\u5929\\u8FD4\\u5DE5\\u76EE\\u6807\\u4E0E\\u8FD4\\u5DE5\\u7387\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 104\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 26\n      }, this), this.state._height > 0 && /*#__PURE__*/_jsxDEV(Bar, {\n        style: {\n          height: this.state._height\n        },\n        ...config\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 10\n    }, this);\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/ReworkTarget.tsx"],"names":["React","Bar","GetReworkTarget","ReworkTarget","Component","constructor","props","getAPIData","res","Table","length","a_m_redo","substring","lastIndexOf","p_m_redo","n_m_redo","high_redo","real_redo","parseInt","toFixed","_data","name","value","type","setState","data","componentDidMount","setInterval","componentWillMount","_full","full","_height","document","body","scrollHeight","_fontSize","hh","getAITraining","state","render","that","onkeydown","e","ev","all","window","event","keyCode","history","push","config","isStack","xField","yField","seriesField","height","color","label","style","fontSize","legend","xAxis","autoHide","autoRotate","fill","yAxis","padding","width","textAlign","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Bar } from '@ant-design/charts';\r\nimport {GetReworkTarget} from '../../utils/RequestService'\r\n\r\n// const _data =  [\r\n//     {\r\n//         name: '最高返工【100】',\r\n//         value: 100,\r\n//         type: '最高返工',\r\n//      },\r\n//     {\r\n//       name: '最高返工【100】',\r\n//       value: 0,\r\n//       type: '上午',\r\n//     },\r\n//     {\r\n//         name: '最高返工【100】',\r\n//       value: 0,\r\n//       type: '下午',\r\n//     },\r\n//     {\r\n//         name: '最高返工【100】',\r\n//       value: 0,\r\n//       type: '夜晚',\r\n//     },\r\n//     {\r\n//         name: '实际返工【80】',\r\n//       value: 40,\r\n//       type: '上午',\r\n//     },\r\n//     {\r\n//         name: '实际返工【80】',\r\n//       value: 30,\r\n//       type: '下午',\r\n//     },\r\n//     {\r\n//         name: '实际返工【80】',\r\n//       value: 10,\r\n//       type: '夜晚',\r\n//     },\r\n//     {\r\n//         name: '实际返工【80】',\r\n//         value: 0,\r\n//         type: '最高返工',\r\n//      },\r\n//   ];\r\n\r\n\r\n\r\nexport default class ReworkTarget extends React.Component<any,any>{\r\n\r\n  constructor(props) {\r\n    super(props);\r\n   \r\n    this.state = { data:[],  _height:0,\r\n      _fontSize:16 };\r\n    }\r\n\r\n    getAPIData=async()=>{\r\n\r\n      const res=await GetReworkTarget()\r\n      if(res.Table==null)return;\r\n      if(res.Table.length==0)return;\r\n      \r\n      var a_m_redo= res.Table[0].a_m_redo.substring(0, res.Table[0].a_m_redo.lastIndexOf('%'));\r\n      var p_m_redo= res.Table[0].p_m_redo.substring(0, res.Table[0].p_m_redo.lastIndexOf('%'));\r\n      var n_m_redo=res.Table[0].n_m_redo.substring(0, res.Table[0].n_m_redo.lastIndexOf('%'));\r\n      var high_redo= res.Table[0].high_redo.substring(0, res.Table[0].high_redo.lastIndexOf('%'));\r\n      var real_redo= res.Table[0].real_redo.substring(0, res.Table[0].real_redo.lastIndexOf('%'));\r\n      \r\n      if(a_m_redo==0)a_m_redo=parseInt(a_m_redo).toFixed(2);\r\n      if(p_m_redo==0)p_m_redo=parseInt(p_m_redo).toFixed(2);\r\n      if(n_m_redo==0)n_m_redo=parseInt(n_m_redo).toFixed(2);\r\n      if(high_redo==0)high_redo=parseInt(high_redo).toFixed(2);\r\n      if(real_redo==0)real_redo=parseInt(real_redo).toFixed(2);\r\n      \r\n      const _data =  [\r\n      {\r\n          name: `最高返工【${high_redo}】`,\r\n          value: high_redo,\r\n          type: `最高返工-${high_redo}%`,\r\n       },\r\n      {\r\n        name: `最高返工【${high_redo}】`,\r\n        value: 0,\r\n        type: `上午-${a_m_redo}%`,\r\n      },\r\n      {\r\n        name: `最高返工【${high_redo}】`,\r\n        value: 0,\r\n        type: `下午-${p_m_redo}%`,\r\n      },\r\n      {\r\n        name: `最高返工【${high_redo}】`,\r\n        value: 0,\r\n        type: `夜晚-${n_m_redo}%`,\r\n      },\r\n      {\r\n          name: `实际返工【${real_redo}】`,\r\n        value: a_m_redo,\r\n        type: `上午-${a_m_redo}%`,\r\n      },\r\n      {\r\n        name: `实际返工【${real_redo}】`,\r\n        value: p_m_redo,\r\n        type: `下午-${p_m_redo}%`,\r\n      },\r\n      {\r\n        name: `实际返工【${real_redo}】`,\r\n        value: n_m_redo,\r\n        type: `夜晚-${n_m_redo}%`,\r\n      },\r\n      {\r\n        name: `实际返工【${real_redo}】`,\r\n          value: 0,\r\n          type: `最高返工-${high_redo}%`,\r\n       },\r\n\r\n       {\r\n        name: `上午返工【${a_m_redo}】`,\r\n      value: a_m_redo,\r\n      type: `上午-${a_m_redo}%`,\r\n    },\r\n    {\r\n      name: `上午返工【${a_m_redo}】`,\r\n      value: 0,\r\n      type: `下午-${a_m_redo}%`,\r\n    },\r\n    {\r\n      name: `上午返工【${a_m_redo}】`,\r\n      value: 0,\r\n      type: `夜晚-${a_m_redo}%`,\r\n    },\r\n    {\r\n      name: `上午返工【${a_m_redo}】`,\r\n        value: 0,\r\n        type: `最高返工-${a_m_redo}%`,\r\n     },\r\n   \r\n     {\r\n      name: `下午返工【${p_m_redo}】`,\r\n    value: p_m_redo,\r\n    type: `上午-${p_m_redo}%`,\r\n  },\r\n  {\r\n    name: `下午返工【${p_m_redo}】`,\r\n    value: 0,\r\n    type: `下午-${p_m_redo}%`,\r\n  },\r\n  {\r\n    name: `下午返工【${p_m_redo}】`,\r\n    value: 0,\r\n    type: `夜晚-${p_m_redo}%`,\r\n  },\r\n  {\r\n    name: `下午返工【${p_m_redo}】`,\r\n      value: 0,\r\n      type: `最高返工-${p_m_redo}%`,\r\n   },\r\n\r\n   {\r\n    name: `夜晚返工【${n_m_redo}】`,\r\n  value: n_m_redo,\r\n  type: `上午-${n_m_redo}%`,\r\n},\r\n{\r\n  name: `夜晚返工【${n_m_redo}】`,\r\n  value: 0,\r\n  type: `下午-${n_m_redo}%`,\r\n},\r\n{\r\n  name: `夜晚返工【${n_m_redo}】`,\r\n  value: 0,\r\n  type: `夜晚-${n_m_redo}%`,\r\n},\r\n{\r\n  name: `夜晚返工【${n_m_redo}】`,\r\n    value: 0,\r\n    type: `最高返工-${n_m_redo}%`,\r\n },\r\n\r\n     \r\n    ];\r\n    // var aa=0.0899.toFixed(2)\r\n    // console.log('high_redo',high_redo)\r\n    // console.log('a_m_redo',a_m_redo)\r\n    // console.log('p_m_redo',p_m_redo)\r\n    // console.log('n_m_redo',aa)\r\n    // console.log('real_redo',real_redo)\r\n    this.setState({data:_data})\r\n    }\r\n \r\n  componentDidMount=async()=> {\r\n    await this.getAPIData()\r\n\r\n     setInterval(\r\n      async() => {\r\n        await this.getAPIData()\r\n      },\r\n      5000);\r\n  }\r\n\r\n  componentWillMount=async()=>{\r\n    var _full=this.props.full==null?true:this.props.full;\r\n    if(_full)\r\n    {\r\n       this.setState({_height:document.body.scrollHeight-120,_fontSize:24})\r\n    }\r\n    else\r\n    {\r\n     this.setState({_fontSize:24,_height:this.props.hh})\r\n    }\r\n  }\r\n\r\n  getAITraining=()=>{\r\n    // const  ss=this.state.data;\r\n    // const aaa=ss.filter(p=>p.name=='实际返工【80】'&&p.type=='夜晚')\r\n    \r\n    // const kkk=aaa[0].value;\r\n    // aaa[0].value=kkk+1;\r\n    // console.log(aaa[0])\r\n    // this.setState({data:ss})\r\n  }\r\n\r\n  \r\n  render(){\r\n      const that=this;\r\n    document.onkeydown = function (e: any) {\r\n      var ev = document.all ? window.event : e;\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n\r\n    const config:any = {\r\n        data: this.state.data,\r\n        //appendPadding: 20,\r\n        isStack: true,\r\n        xField: 'value',\r\n        yField: 'name',\r\n        seriesField: 'type',\r\n        //isPercent: true,\r\n       \r\n        height:that.props.hh,\r\n        //colorField: 'year', // 部分图表使用 seriesField\r\n        //colorField: 'type', // 部分图表使用 seriesField\r\n        color: ['#0066cc', '#b3d9ff', '#66b3ff','#1a8cff'],\r\n        label:{\r\n           // position: 'middle',\r\n           style:{\r\n            fontSize:this.state._fontSize\r\n          },\r\n        },\r\n        legend:false,\r\n        xAxis: {\r\n          label: {\r\n            autoHide: false,\r\n            autoRotate: true,\r\n            style: {\r\n              fill: 'black',\r\n             // opacity: 0.6,\r\n              fontSize: this.state._fontSize\r\n            },\r\n           // rotate: true\r\n          },\r\n        },\r\n        yAxis: {\r\n          label: {\r\n            autoHide: false,\r\n            autoRotate: true,\r\n            style: {\r\n              fill: 'black',\r\n             // opacity: 0.6,\r\n              fontSize: this.state._fontSize\r\n            },\r\n           // rotate: true\r\n          },\r\n        },\r\n        // label: {\r\n        //   position: 'middle',\r\n        //   layout: [\r\n        //     { type: 'interval-adjust-position' },\r\n        //     { type: 'interval-hide-overlap' },\r\n        //     { type: 'adjust-color' },\r\n        //   ],\r\n        // },\r\n      };\r\n\r\n  return <div style={{padding:'0px 20px'}}>\r\n   {this.props.hh==null&&<div style={{width:'100%',textAlign:'center',fontSize:'30px',fontWeight:600}}><h1>当天返工目标与返工率</h1></div>}\r\n   {this.state._height>0&&<Bar style={{height:this.state._height}} {...config}/>}\r\n  </div>\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}