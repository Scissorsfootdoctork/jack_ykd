{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/ProcessWork.tsx\";\nimport React from 'react';\nimport { Column } from '@ant-design/charts';\nimport { GetBalanceSheet } from '../../utils/RequestService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class ProcessWork extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res = await GetBalanceSheet();\n      if (res.Table == null) return;\n      if (res.Table.length == 0) return;\n      var _data = [];\n\n      for (var i = 0; i < res.Table.length; i++) {\n        var item = res.Table[i];\n        var qc = item.Quantity == null ? 0 : item.qc;\n        var Description = item.Description == null ? 0 : item.Description;\n\n        if (qc > 0) {\n          _data.push({\n            name: Description,\n            value: qc\n          });\n        }\n      }\n\n      this.setState({\n        data: _data\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        await this.getAPIData();\n      }, 6000);\n    };\n\n    this.state = {\n      data: []\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    const config = {\n      data: this.state.data,\n      xField: 'name',\n      yField: 'value',\n      label: {\n        //position: 'top',\n        position: 'middle',\n        style: {\n          fill: '#ffffff',\n          opacity: 0.6\n        }\n      },\n      xAxis: {\n        label: {\n          autoHide: false,\n          autoRotate: true\n        }\n      },\n      meta: {\n        type: {\n          alias: '工序'\n        },\n        sales: {\n          alias: '返工率'\n        }\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(Column, { ...config,\n      style: {\n        height: this.props.hh\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/ProcessWork.tsx"],"names":["React","Column","GetBalanceSheet","ProcessWork","Component","constructor","props","getAPIData","res","Table","length","_data","i","item","qc","Quantity","Description","push","name","value","setState","data","componentDidMount","setInterval","state","render","that","document","onkeydown","e","ev","all","window","event","keyCode","history","config","xField","yField","label","position","style","fill","opacity","xAxis","autoHide","autoRotate","meta","type","alias","sales","height","hh"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Column } from '@ant-design/charts';\r\nimport { GetBalanceSheet } from '../../utils/RequestService';\r\n\r\nexport default class ProcessWork extends React.Component<any, any>{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = { data: [] };\r\n    }\r\n\r\n    getAPIData = async () => {\r\n\r\n        const res = await GetBalanceSheet()\r\n        if(res.Table==null)return;\r\n        if (res.Table.length == 0) return;\r\n        var _data = [];\r\n\r\n        for (var i = 0; i < res.Table.length; i++) {\r\n            var item = res.Table[i];\r\n            var qc = item.Quantity == null ? 0 : item.qc;\r\n            var Description = item.Description == null ? 0 : item.Description;\r\n            if (qc > 0) {\r\n                _data.push({ name: Description, value: qc })\r\n            }\r\n        }\r\n        this.setState({ data: _data })\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        await this.getAPIData()\r\n\r\n        setInterval(\r\n            async () => {\r\n                await this.getAPIData()\r\n            },\r\n            6000);\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const that = this;\r\n    document.onkeydown = function (e: any) {\r\n      var ev = document.all ? window.event : e;\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n        const config: any = {\r\n            data: this.state.data,\r\n            xField: 'name',\r\n            yField: 'value',\r\n            label: {\r\n                //position: 'top',\r\n                position: 'middle',\r\n                style: {\r\n                    fill: '#ffffff',\r\n                    opacity: 0.6,\r\n                },\r\n            },\r\n            xAxis: {\r\n                label: {\r\n                    autoHide: false,\r\n                    autoRotate: true,\r\n                },\r\n            },\r\n            meta: {\r\n                type: { alias: '工序' },\r\n                sales: { alias: '返工率' },\r\n            },\r\n        };\r\n        return <Column {...config} style={{ height: this.props.hh }} />;\r\n    }\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}