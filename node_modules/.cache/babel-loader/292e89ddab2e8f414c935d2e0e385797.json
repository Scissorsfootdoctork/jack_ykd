{"ast":null,"code":"var _jsxFileName = \"/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/BalanceSheet.tsx\";\nimport React from 'react';\nimport { Column } from '@ant-design/charts';\nimport { GetBalanceSheet } from '../../utils/RequestService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class BalanceSheet extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAPIData = async () => {\n      const res = await GetBalanceSheet();\n      if (res.Table == null) return;\n      if (res.Table.length == 0) return;\n      var _data = []; // for(var i=0;i<res.Table.length;i++)\n      // {\n      //   var item=res.Table[i];\n      //   var Quantity=item.Quantity==null?0:item.Quantity;\n      //   var Description=item.Description==null?0:item.Description;\n      //   _data.push({name:Description,value:Quantity})\n      // }  \n\n      for (var k = 0; k < 3; k++) {\n        for (var i = 0; i < res.Table.length; i++) {\n          var item = res.Table[i];\n          var Quantity = item.Quantity == null ? 0 : item.Quantity;\n          var Description = item.Description == null ? 0 : item.Description + k;\n\n          _data.push({\n            name: Description,\n            value: Quantity\n          });\n        }\n      }\n\n      this.setState({\n        data: _data\n      });\n    };\n\n    this.componentDidMount = async () => {\n      await this.getAPIData();\n      setInterval(async () => {\n        await this.getAPIData();\n      }, 6000);\n    };\n\n    this.componentWillMount = async () => {\n      var _full = this.props.full == null ? true : this.props.full;\n\n      if (_full) {\n        this.setState({\n          _height: document.body.scrollHeight - 120,\n          _fontSize: 24\n        });\n      } else {\n        this.setState({\n          _fontSize: 16,\n          _height: this.props.hh\n        });\n      }\n    };\n\n    this.state = {\n      data: [],\n      _height: 0,\n      _fontSize: 16\n    };\n  }\n\n  render() {\n    const that = this;\n\n    document.onkeydown = function (e) {\n      var ev = document.all ? window.event : e;\n\n      if (ev.keyCode == 27) {\n        that.props.history.push('/');\n      }\n    };\n\n    const config = {\n      data: this.state.data,\n      xField: 'name',\n      yField: 'value',\n      label: {\n        //position: 'top',\n        position: 'middle',\n        style: {\n          fill: 'black',\n          //opacity: 0.6,\n          fontSize: this.state._fontSize\n        }\n      },\n      xAxis: {\n        label: {\n          autoHide: false,\n          autoRotate: true,\n          style: {\n            fill: 'black',\n            // opacity: 0.6,\n            fontSize: this.state._fontSize\n          } // rotate: true\n\n        }\n      },\n      //legend:{false},\n      //legend: {\n      //layout: 'horizontal',\n      //position: 'right',\n      //},\n      meta: {\n        type: {\n          alias: '工序'\n        },\n        sales: {\n          alias: '产量'\n        }\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.hh == null && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u751F\\u4EA7\\u5E73\\u8861\\u72B6\\u51B5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 71\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 24\n      }, this), this.state._height > 0 && /*#__PURE__*/_jsxDEV(Column, { ...config,\n        style: {\n          height: this.state._height\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true); //;\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/kscissorfootdoctor/Desktop/ykd.tv/src/pages/compontents/BalanceSheet.tsx"],"names":["React","Column","GetBalanceSheet","BalanceSheet","Component","constructor","props","getAPIData","res","Table","length","_data","k","i","item","Quantity","Description","push","name","value","setState","data","componentDidMount","setInterval","componentWillMount","_full","full","_height","document","body","scrollHeight","_fontSize","hh","state","render","that","onkeydown","e","ev","all","window","event","keyCode","history","config","xField","yField","label","position","style","fill","fontSize","xAxis","autoHide","autoRotate","meta","type","alias","sales","width","textAlign","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Column } from '@ant-design/charts';\r\nimport { GetBalanceSheet } from '../../utils/RequestService';\r\n\r\nexport default class BalanceSheet extends React.Component<any,any>{\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n   \r\n    this.state = { \r\n      data:[],\r\n    _height:0,\r\n      _fontSize:16\r\n    };\r\n    }\r\n\r\n  getAPIData=async()=>{\r\n\r\n    const res=await GetBalanceSheet()\r\n    if(res.Table==null)return;\r\n    if(res.Table.length==0)return;\r\n    var _data=[];\r\n    \r\n    // for(var i=0;i<res.Table.length;i++)\r\n    // {\r\n    //   var item=res.Table[i];\r\n    //   var Quantity=item.Quantity==null?0:item.Quantity;\r\n    //   var Description=item.Description==null?0:item.Description;\r\n    //   _data.push({name:Description,value:Quantity})\r\n    // }  \r\n   \r\n     for(var k=0;k<3;k++)\r\n     {\r\n     for(var i=0;i<res.Table.length;i++)\r\n    {\r\n      var item=res.Table[i];\r\n      var Quantity=item.Quantity==null?0:item.Quantity;\r\n      var Description=item.Description==null?0:item.Description+k;\r\n      _data.push({name:Description,value:Quantity})\r\n    }  \r\n  }\r\n    \r\n    this.setState({data:_data})\r\n  }\r\n\r\ncomponentDidMount=async()=> {\r\n \r\n \r\n\r\n  await this.getAPIData()\r\n\r\n   setInterval(\r\n    async() => {\r\n      await this.getAPIData()\r\n    },\r\n    6000);\r\n}\r\n\r\ncomponentWillMount=async()=>{\r\n  var _full=this.props.full==null?true:this.props.full;\r\n  if(_full)\r\n  {\r\n     this.setState({_height:document.body.scrollHeight-120,_fontSize:24})\r\n  }\r\n  else\r\n  {\r\n   this.setState({_fontSize:16,_height:this.props.hh})\r\n  }\r\n}\r\n\r\n\r\n\r\n  render(){\r\n    const that = this;\r\n    document.onkeydown = function (e: any) {\r\n      var ev = document.all ? window.event : e;\r\n      if (ev.keyCode == 27) {\r\n        that.props.history.push('/')\r\n      }\r\n    }\r\n    const config:any = {\r\n\r\n      data: this.state.data,\r\n      xField: 'name',\r\n      yField: 'value',\r\n      label: {\r\n        //position: 'top',\r\n        position:'middle',\r\n        style: {\r\n          fill: 'black',\r\n          //opacity: 0.6,\r\n          fontSize: this.state._fontSize\r\n        },\r\n      },\r\n      xAxis: {\r\n        label: {\r\n          autoHide: false,\r\n          autoRotate: true,\r\n          style: {\r\n            fill: 'black',\r\n           // opacity: 0.6,\r\n            fontSize: this.state._fontSize\r\n          },\r\n         // rotate: true\r\n        },\r\n      },\r\n      //legend:{false},\r\n      //legend: {\r\n        //layout: 'horizontal',\r\n        //position: 'right',\r\n        \r\n      //},\r\n      meta: {\r\n        type: { alias: '工序' },\r\n        sales: { alias: '产量' },\r\n      },\r\n    };\r\n  return <>\r\n {this.props.hh==null&&<div style={{width:'100%',textAlign:'center'}}><h1>生产平衡状况</h1></div>}\r\n\r\n {this.state._height>0&& <Column {...config} style={{height:this.state._height}}/>}\r\n  </>\r\n  \r\n  //;\r\n  }\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}